function startMove(n,e,t){clearInterval(n.timer),n.timer=setInterval(function(){var i=!0;for(var o in e){var s=0;s="opacity"==o?100*parseFloat(getStyle(n,o)):parseInt(getStyle(n,o));var a=(e[o]-s)/8;a=a>0?Math.ceil(a):Math.floor(a),s!=e[o]&&(i=!1),"opacity"==o?(n.style.filter="alpha(opacity="+(s+a)+");",n.style.opacity=(s+a)/100):n.style[o]=s+a+"px"}i&&(clearInterval(n.timer),t&&t())},30)}function getStyle(n,e){return n.currentStyle?n.currentStyle[e]:getComputedStyle(n)[e]}$(function(){function n(){i++,e.animate_buffer({top:-48*i},function(){i>=e.find($("li")).length-1&&(e.css("top",0),i=0)})}$.ajax({url:"../daohan.json",type:"GET",success:function(n){for(var e=n,t=1;t<e[3].goods.length;t++){var i=$("#goodsRecommend-recommend").find($(".grid-title")).find($("li"));i.find($(".grid-pic")).eq(t).attr("src","../"+e[3].goods[t].img),i.find($(".grid-title")).eq(t).html(e[3].goods[t].title),i.find($(".grid-desc")).eq(t).html(e[3].goods[t].des),i.find($(".grid-price")).eq(t).html(e[3].goods[t].price)}i.find($(".grid-title")).eq(0).html(e[3].goods[7].title),i.find($(".grid-desc")).eq(0).html(e[3].goods[7].des),i.find($(".grid-price")).eq(0).html(e[3].goods[7].price),$(".category-info").each(function(n,t){$(t).find($("h3")).html(e[n].title)});for(var o=0;o<$(".category-info").size();o++){$(".category-info").eq(o).find($(".p_title")).html(e[o].title_top);for(var t=0;t<3&&e[o].title_list[t];t++){var s=$("<span>"+e[o].title_list[t]+"</span>");s.attr("class","info_span"),$(".category-info").eq(o).append(s)}for(var t=0;t<e[o].title_list.length;t++){var s=$("<span>"+e[o].title_list[t]+"</span>");s.attr("class","p_desc_span"),$(".category-info").eq(o).find($(".p_desc")).append(s)}for(var t=0;t<4;t++)$(".category-info").eq(o).find($(".transform_pic")).find($("span")).eq(t).html(e[o].goods[t+1].title),$(".category-info").eq(o).find($(".transform_pic")).find($("em")).eq(t).html(e[o].goods[t+1].price),$(".category-info").eq(o).find($(".transform_pic")).find($("img")).get(t).src="../"+e[o].goods[t+1].img}$(".category-info").mouseenter(function(){$(".show_product").css("display","none"),$(".show_product").eq($(this).index()).css("display","block"),$(".category-info").eq($(this).index()).stop().animate({opacity:1},300)}),$(".include-category").mouseleave(function(){$(".show_product").css("display","none")}),$(".category-info").mouseleave(function(){$(".category-info").eq($(this).index()).stop().animate({opacity:.8},300)}),$(".home-hot-goods").eq(0).find($("h2")).html(e[6].title),$(".home-hot-goods").eq(1).find($("h2")).html("精品推荐"),$(".home-hot-goods").eq(0).find($("h2")).html(e[6].title),$("#home-recomend-goods").find($(".large_pic")).attr("src","../"+e[6].goods[0].img);for(var t=1;t<e[6].goods.length;t++)$("#home-recomend-goods").find($(".grid-pic")).eq(t).attr("src","../"+e[6].goods[t].img),$("#home-recomend-goods").find($("li")).find($(".grid-title")).eq(t-1).html(e[6].goods[t].title),$("#home-recomend-goods").find($(".grid-desc")).eq(t-1).html(e[6].goods[t].des),$("#home-recomend-goods").find($(".grid-price")).eq(t-1).html(e[6].goods[t].price)}}),$.ajax({url:"../background_ad.json",type:"get",success:function(n){function e(){l++,t()}function t(){$(".ec-slider-nav").find($("span")).attr("class",""),$(".ec-slider-nav").find($("span")).eq(l).attr("class","active_span");var n=$(".transform_background").find($("li")).size();l==n&&$(".ec-slider-nav").find($("span")).eq(0).attr("class","active_span"),$(".transform_background").find($("li")).stop().animate({opacity:0},1e3),l--,$(".transform_background").find($("li")).eq(++l).stop().animate({opacity:1},1e3,function(){l==n-1&&(l=-1)})}function i(){u++,o()}function o(){h.attr("class",""),h.eq(u).attr("class","active_span"),u==s[2].length&&h.eq(0).attr("class","active_span"),m.stop().animate({opacity:0},1e3),u--,m.eq(++u).stop().animate({opacity:1},1e3,function(){u==s[2].length-1&&(u=-1)})}for(var s=n,a=0;a<s[0].length;a++){var c=$("<span></span>");0==a&&c.attr("class","active_span"),$(".ec-slider-nav").append(c);var r=$("<li></li>");r.css("background","url(../"+s[0][a].img+") no-repeat center"),$(".transform_background").append(r)}$(".transform_background").find($("li")).css("opacity",0),$(".transform_background").find($("li")).eq(0).css("opacity",1);var l=0,d=null;d=setInterval(e,3e3),$(".ec-slider-nav").on("mouseenter","span",function(){clearInterval(d),l=$(this).index(),t()}),$(".ec-slider-nav").on("mouseleave","span",function(){d=setInterval(e,3e3)});for(var a in s[1])$("#home-promo-list").find($("img")).eq(a).attr("src","../"+s[1][a].img);for(var a=0;a<s[2].length;a++){var f=$("<li></li>"),p=$("<img />"),g=$("<span></span>");f.css("opacity",0),0==a&&g.attr("class","active_span"),$("#banner-slidesshow").find($(".slidesshow_span")).append(g),p.attr("src","../"+s[2][a].img),f.append(p),$("#banner-slidesshow").find($("ul")).append(f)}var u=0,m=$("#banner-slidesshow").find($("ul")).find($("li")),h=$("#banner-slidesshow").find($(".slidesshow_span")).find($("span")),v=setInterval(i,3e3);m.css("opacity",0),m.eq(0).css("opacity",1),$("#banner-slidesshow").find($(".slidesshow_span")).on("mouseenter","span",function(){clearInterval(v),u=$(this).index(),o()}),$("#banner-slidesshow").find($(".slidesshow_span")).on("mouseleave","span",function(){v=setInterval(i,3e3)})}}),function(){var n=$("#goodsRecommend-recommend").find($(".grid-title")),e=$("#goodsRecommend-recommend").find($(".grid-btn-l"));$("#goodsRecommend-recommend").find($(".grid-btn-r")).click(function(){n.animate_buffer({left:-1002})}),e.click(function(){n.animate_buffer({left:0})}),n.position().left}();var e=$("#accountr").find($(".accountr-r")).find($(".p-notice-content")).find($(".p-notice-list")),t=null,i=0;t=setInterval(n,2e3),e.on("mouseenter","li",function(){clearInterval(t)}),e.on("mouseleave","li",function(){t=setInterval(n,2e3)}),$(window).scroll(function(){$(window).scrollTop()>=$(window).width()?($(".huangBar_top").css("display","block"),$(".huangBar_top").click(function(){$(window).scrollTop(0)})):$(".huangBar_top").css("display","none")}),$("input").blur(function(){$("input").val()||$(".layout-input").find($("a")).css("display","block")}),$("input").focus(function(){$(".layout-input").find($("a")).css("display","none")});var o=$(".login").find($("a")).eq(0),s=$(".login").find($("a")).eq(1);o.click(function(){$("#login_click").css("display","block")}),s.click(function(){$("#register_click").css("display","block")}),$(".click_close").click(function(){$(".login_click").css("display","none")}),$(".register_input").click(function(){$.ajax({url:"insertAccount.php",type:"POST",data:{uesrname:$(".register1").val(),password:$(".register2").val()},success:function(n,e,t){console.log(n,e,t),console.log(typeof n),n&&$(".span1").eq(1).html("注册成功")}})}),$(".login_input").click(function(){console.log($(".register1").val(),$(".register2").val()),$.ajax({url:"showAccount.php",type:"POST",data:{uesrname:$(".login1").val(),password:$(".login2").val()},success:function(n){console.log(typeof n),n&&$(".span1").eq(0).html("登陆成功")}})})}),$.fn.extend({animate_buffer:function(n,e){for(var t=$(this).get(),i=0;i<t.length;i++)startMove(t[i],n,e)}});